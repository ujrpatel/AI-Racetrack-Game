# Auto-generated by Recipe Engine, do not modify manually.
# This job is generated by the wrench recipe engine module, see find the docs here: .

# Publish Dry Run  for ml-agents to https://artifactory-slo.bf.unity3d.com/artifactory/api/npm/upm-npm
publish_dry_run_ml-agents:
  name: Publish Dry Run ml-agents
  agent:
    image: package-ci/ubuntu-20.04:default
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: curl $WRENCH_LOCAL_APV_DOWNLOAD_URL -o wrench-localapv.zip
  - command: 7z x wrench-localapv.zip
  - command: python PythonScripts/print_machine_info.py
  - command: upm-pvp publish --packages "upm-ci~/packages/*.tgz" --evidence results --dry-run
  artifacts:
    pvp-results:
      paths:
      - upm-ci~/pvp/**/*
  dependencies:
  - path: .yamato/wrench/package-pack-jobs.yml#package_pack_-_ml-agents
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_macos
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-macos
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-macos
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_ubuntu
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-ubuntu
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-ubuntu
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_windows
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-windows
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-windows
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_macos
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-macos
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-macos
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_ubuntu
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-ubuntu
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-ubuntu
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_windows
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-windows
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-windows
        unzip: true
  variables:
    UPMPVP_ACK_UPMPVP_DOES_NO_API_VALIDATION: 1
    UPMPVP_CONTEXT_WRENCH: 0.10.5.0
  triggers:
    expression: push.branch match "^release/.*"
    cancel_old_ci: true
  metadata:
    Job Maintainers: '#rm-packageworks'
    Wrench: 0.10.5.0

# Publish  for ml-agents to https://artifactory-slo.bf.unity3d.com/artifactory/api/npm/upm-npm
publish_ml-agents:
  name: Publish ml-agents
  agent:
    image: package-ci/ubuntu-20.04:default
    type: Unity::VM
    flavor: b1.large
  commands:
  - command: curl $WRENCH_LOCAL_APV_DOWNLOAD_URL -o wrench-localapv.zip
  - command: 7z x wrench-localapv.zip
  - command: python PythonScripts/print_machine_info.py
  - command: python PythonScripts/ignore_existing_package_failure.py
  artifacts:
    pvp-results:
      paths:
      - upm-ci~/pvp/**/*
  dependencies:
  - path: .yamato/wrench/package-pack-jobs.yml#package_pack_-_ml-agents
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_macos
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-macos
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-macos
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_ubuntu
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-ubuntu
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-ubuntu
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_2023_2_-_windows
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-2023.2-windows
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-2023.2-windows
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_macos
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-macos
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-macos
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_ubuntu
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-ubuntu
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-ubuntu
        unzip: true
  - path: .yamato/wrench/validation-jobs.yml#validate_-_ml-agents_-_6000_0_-_windows
    specific_options:
      UTR:
        location: results/UTR/validate-ml-agents-6000.0-windows
        unzip: true
      pvp-results:
        location: results/pvp/validate-ml-agents-6000.0-windows
        unzip: true
  variables:
    UPMPVP_ACK_UPMPVP_DOES_NO_API_VALIDATION: 1
    UPMPVP_CONTEXT_WRENCH: 0.10.5.0
  metadata:
    Job Maintainers: '#rm-packageworks'
    Wrench: 0.10.5.0

